@strict: true;

// Covered: 
// 
// User area panel
// Message feed



/* ### USER POPOUTS ### */



/* avatar decorations */
img[class^="avatarDecoration"], svg[class^="avatarDecoration"] {
    visibility: hidden;
}

/* profile effects */
div[class^="profileEffects"] {
    visibility: hidden;
}

/* unnecessary badges */
div[aria-label="User Badges"] > 
    div[aria-label^="HypeSquad"],
    div[aria-label="Early Supporter"],
    div[aria-label="Completed a Quest"] {
        display: none;
}

/* quick actions */
div[class^="userPopoutInner"] > div:nth-child(1) {
    display: none;
}

/* "Add Note" button */
button[aria-label="Add Note"] {
    display: none;
}

/* message section */
div[class*="userProfileInner"] {
    & > div[class^="body"] {
        padding-bottom: 16px;
    }
    & > footer {
        display: none;
    }
}

/* "View Full Bio" button */
button[class^="viewFullBio"] {
    display: none;
}

/* new status design */
div[class^="visibleContainer"], div[class^="invisibleContainer"] {
    display: none;
}


/* [ STRICT ]: "Member Since" and "Friends Since" icons */
& when (@strict = true) {
    div[class^="memberSince"] {
        & svg {
            display: none;
        }
        & div[class^="icon"] {
            display: none;
        }
    }
}

/* "Friends" banner button */
div[class*="userProfileInner"] {
    & > div[class^="wrapper"] {
        gap: 4px;
    }

    & button[aria-label="Friends"] {
        display: none;
    }
}

/* [ STRICT ]: "Message" and "Add Friend" icons */
& when (@strict = true) {
    button[aria-label="Message"][class*="sizeSmall"] svg {
        display: none;
    }
    button[aria-label="Add Friend"] svg {
        display: none;
    }
}

/* "Connections" profile section */
section:has(div[class^="connectedAccounts"], div[class^="note"]) {
    display: none;
}

/* "No servers in common" and "No friend groups in common" images */
div[class^="emptyIcon"] {
    display: none;
}



/* ### SERVERS AND CHANNELS ### */



// TODO: "New unreads" popup

/* unread pills */
li[class^="containerDefault"] div[class^="unread"] {
    visibility: hidden;
}

div[class^="listItem"] div[class^="pill"] {
    visibility: hidden;
}

/* unread pills server whitelist */

// ew this feels wrong

/*
    div[class^="listItem"]:has(
        div[data-list-item-id*="<serverID>"]
    ) div[class^="pill"] {
        visibility: visible;
    }
*/

/* activity badges */
div[class^="upperBadge"] {
    visibility: hidden;
}

div[class^="listItem"] use[href$="upper_badge_masks"] {
    visibility: hidden;
}

/* "Discover Servers" button */
div[aria-label="Explore Discoverable Servers"] {
    display: none;
}

/* "Create Invite" button */
div[class^="iconItem"][aria-label="Create Invite"] {
    display: none !important;
}

/* server boost bar above the channel list */
ul[aria-label="Channels"] > li > div[class^="container"][data-list-item-id*="boosts"] {
    display: none;
}

/* "Suggested" channel section */

// very shady because it doesn't actually hook into anything related to said
// section it just yeets everything between the first and second channel
// divider

ul[aria-label="Channels"]:has( > div:nth-child(2 of [class^="sectionDivider"])) {
    & div:nth-child(1 of [class^="sectionDivider"]) ~
    :not(
        ul[aria-label="Channels"] >
        div:nth-child(2 of [class^="sectionDivider"])
    ):not(
        ul[aria-label="Channels"] >
        div:nth-child(2 of [class^="sectionDivider"]) ~
        *
    ) {
        display: none;     
    }
    & div:nth-child(1 of [class^="sectionDivider"]) {
        display: none;
    }
}

//

/* server banner image */
div[class^="animatedContainer"]:has( > div[class*="bannerImage"]),
div[style="height: 84px;"] {
    display:none;
}

/* server icon */
div[class^="guildIconV2Container"] {
    display: none;
}

/* server info expand dropdown arrow */
div[class^="guildIconV2Container"] ~ div[class^="headerChildren"] {
    display: none;
}

/* channel category expand dropdown arrow */
div[aria-label$="(category)"] svg[class^="icon"] {
    display: none;
}

/* "Invite to Server" channel hover button */
div[aria-label="Invite to Server"] > svg {
    display: none;
}

// I kinda want to also remove the "Edit Channel" icon but that's too much I think.

//



/* ### MESSAGE FEED ### */



/* typing dots */
div[class^="typingDots"] svg[class^="ellipsis"] {
    display: none;
}

/* app launcher */
div[class^="channelAppLauncher"] {
    display: none;
}

/* ### MISCELLANEOUS ### */



/* channel toolbar icons */
div[class^="iconWrapper"][aria-label="Help"],
div[class^="iconWrapper"][aria-label="Notification Settings"] {
    display: none;
}

/* emote menu diversity selector */
div[class^="emojiPicker"] > div[class^="header"] > div[class^="searchBar"] {
    margin-right: 0px;
    & ~ div[class^="diversitySelector"] {
        display: none;
    }
}

/* "Store" and "Shop" from DM section */
li:has(a[href="/store"], a[href="/shop"]) {
    display: none;
}

/* "Message" button opposite of profile picture */
div[class^="actionButton"][aria-label="Message"] {
    display: none;
}

/* redundant search bar */
div[class^="peopleColumn"] > div[class^="searchBar"] {
    display: none;
}

/* "Friends" top bar icon */
main[aria-label="Friends"] section[role="navigation"] svg {
    display: none;
}

/* Wumpus image and text in empty sections */
div[class^="friendsEmpty"] {
    height: 100%;
    & > div {
        flex: 1;
    }
    & div[class^="image"] {
        display: none;
        & ~ div {
            &::after {
                content: "Nothing here.";
                font-size: 16px;
                line-height: 20px;
                text-align: center;
                color: var(--text-muted);
            }
            & > div[class^="text"] {
                display: none;
            }
        }
    }
}

/* "Add Friend" form description text */
div[class^="peopleColumn"] div[class*="formText"] {
    display: none;
}

/* "Active Now" section */
div[class^="nowPlayingColumn"] {
    display: none;
}

/* top bar section titles */
div[class^="peopleColumn"] > div[class^="sectionTitle"] {
    display: none;
}

div[class^="peopleList"] :nth-child(1 of [class^="peopleListItem"]) {
    border-top: none;
}

/* user status texts */
div[class^="peopleListItem"] div[class^="subtext"] {
    display: none;
}



//



/* ### USER AREA PANEL ### */



// TODO: Action tooltips like "Deafen" or "Mute"

/* Krisp icon */
button[aria-label="Noise Suppression powered by Krisp"] {
    display: none;
}

/* new activity pill */
button[aria-label="Start an Activity"] span[class^="dot"] {
    display: none;
}

/* user online status & username subtext panel */
section[aria-label="User area"] div[class^="panelSubtextContainer"] {
    display: none;
}

/* "Copy username" button in the self profile popup */
div[class^="nicknameIcons"] {
    display: none;
}



/* ### MESSAGE FEED ### */



/* "Channel Action" icons */
div[aria-label="Channel Actions"] svg[class^="optionIcon"] {
    display: none;
}



/* ### MULTI CATEGORY ### */



/* [STRICT]: role icons */
& when (@strict = true) {
    img[aria-label^="Role icon"] {
        display: none;
    }
}



/* ### CHANNEL HEADER */



// TODO: Search popup "Learn more" button